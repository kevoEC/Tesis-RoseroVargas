import{u as b,r as o,j as a,G as f,C as j,d as y,e as w,a as E,t as n}from"./index-ABbIRX4x.js";import{T as k}from"./TablaCustom2-DS7_i3Ng.js";import{D as v,a as D,b as N,c as S,d as L}from"./jspdf.plugin.autotable-CZR7NrjE.js";import{a as A,d as F}from"./CalendarioOperacionesService-Pd8v99_L.js";import O from"./CalendariosForm-Ctb_07PN.js";function _(){const i=b(),[d,c]=o.useState([]),[u,l]=o.useState(!0),[m,s]=o.useState(!1),[T,x]=o.useState(null),t=async()=>{l(!0);try{const e=await A();c(e)}catch(e){n.error("Error al cargar calendarios: "+(e.message??e))}finally{l(!1)}};o.useEffect(()=>{t()},[]);const h=()=>{x(null),s(!0)},g=e=>{i(`/calendario/editar/${e.idCalendario}`)},C=async e=>{try{await F(e.idCalendario),n.success("Calendario eliminado."),t()}catch(r){n.error("Error al eliminar calendario: "+(r.message??r))}},p=[{key:"idCalendario",label:"",render:e=>a.jsxs("div",{className:"flex items-center justify-center group relative text-indigo-500",children:[a.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"1.7",viewBox:"0 0 24 24",children:[a.jsx("rect",{x:"3",y:"5",width:"18",height:"16",rx:"2",stroke:"currentColor",strokeWidth:"1.7"}),a.jsx("path",{d:"M16 3v4M8 3v4M3 9h18",stroke:"currentColor",strokeWidth:"1.7"})]}),a.jsxs("span",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-1 text-xs text-white bg-zinc-800 px-2 py-0.5 rounded shadow opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-50 whitespace-nowrap",children:["ID: ",e]})]})},{key:"nombre",label:"Nombre"},{key:"fechaCorte",label:"Fecha Corte",render:e=>e?new Date(e).toLocaleDateString():""},{key:"calendarioInversiones",label:"Día Inversiones"},{key:"fechaGenerarPagos",label:"F. Generar Pagos",render:e=>e?new Date(e).toLocaleDateString():""},{key:"fechaEnvioEECC",label:"F. Envío EECC",render:e=>e?new Date(e).toLocaleDateString():""},{key:"estadoCalendario",label:"Estado",render:e=>{const r=e===1||e===!0||e==="1"||e==="true";return a.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${r?"bg-gray-300 text-gray-700":"bg-blue-100 text-blue-700"}`,children:r?"Cerrado":"Abierto"})}}];return a.jsxs("div",{className:"p-4 sm:p-6 md:p-8 max-w-full relative",children:[a.jsx(f,{visible:u,message:"Cargando calendarios..."}),a.jsxs(j,{className:"w-full border border-muted rounded-xl shadow-[0_4px_10px_rgba(0,0,0,0.12)]",children:[a.jsx(y,{children:a.jsx(w,{className:"text-3xl",children:"Lista de Calendarios"})}),a.jsx(E,{className:"p-6 overflow-x-auto",children:a.jsx(k,{columns:p,data:d,mostrarEditar:!0,mostrarAgregarNuevo:!0,mostrarEliminar:!0,onAgregarNuevoClick:h,onEditarClick:g,onEliminarClick:C})})]}),a.jsx(v,{open:m,onOpenChange:s,children:a.jsxs(D,{className:`\r
    min-w-[420px]\r
    max-w-2xl\r
    max-h-[80vh]\r
    overflow-y-auto\r
    scrollbar-thin\r
    scrollbar-thumb-rounded-full\r
    scrollbar-thumb-zinc-300\r
    scrollbar-track-transparent\r
  `,children:[a.jsxs(N,{children:[a.jsx(S,{children:"Agregar Calendario"}),a.jsx(L,{children:"Completa la información del nuevo calendario de operaciones"})]}),a.jsx(O,{onClose:()=>s(!1),onSaved:t})]})})]})}export{_ as default};
