import{r as i,t as y,j as e,C as v,G as b,a as N,f as w,h as C,w as p,U as P,y as k,z as T,D as E,M as S,H as A,J as z,P as B,K as D}from"./index-ABbIRX4x.js";import{I as L,P as I,D as F,A as M,C as U,B as $,a as G,F as O}from"./Finalizacion-BCFa8qRG.js";import{A as H}from"./Adjuntos-DaBg_yYZ.js";import{T as R}from"./TablaCustom2-DS7_i3Ng.js";import{b as q}from"./TareaService-8EzhbblL.js";import{b as J}from"./SolicitudService-BRPNL4PC.js";import"./switch-BQg2MTGH.js";import"./index-CFqNEq9z.js";import"./select-C75wXMdb.js";import"./TipoSolicitudService-CPF5HMHv.js";import"./TipoClienteService-BAK64bBK.js";import"./TipoIdentificacionService-BJmrDHaB.js";import"./ProyeccionService-PEcHVMkt.js";import"./jspdf.plugin.autotable-CZR7NrjE.js";import"./ProyeccionNueva-DfKzqoJI.js";import"./alert-dialog-BbB2nhGe.js";import"./BancoService-CbhJQYfY.js";import"./AdjuntoForm-DZV0TiXW.js";function K({idSolicitud:o}){const[n,s]=i.useState([]),[t,c]=i.useState(!0);i.useEffect(()=>{o&&x()},[o]);const x=async()=>{c(!0);try{const a=await q(o);s(a)}catch(a){y.error("Error al cargar tareas: "+a.message)}finally{c(!1)}},m=[{key:"idTarea",label:"",render:a=>e.jsxs("div",{className:"flex items-center justify-center group relative text-gray-500",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"1.5",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17h6m-6-4h6m2 9a2 2 0 002-2V7a2 2 0 00-2-2h-3.586a1 1 0 01-.707-.293l-1.414-1.414A1 1 0 0011.586 3H9a2 2 0 00-2 2v14a2 2 0 002 2h6z"})}),e.jsxs("span",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-1 text-xs text-white bg-zinc-800 px-2 py-0.5 rounded shadow opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-50 whitespace-nowrap",children:["ID: ",a]})]})},{key:"tareaNombre",label:"Nombre"},{key:"nombreResultado",label:"Estado",render:a=>e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${a==="Pendiente"?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:a})},{key:"fechaCreacion",label:"Creación",render:a=>new Date(a).toLocaleDateString()}];return e.jsxs(v,{className:"relative",children:[e.jsx(b,{visible:t,message:"Cargando tareas..."}),e.jsx(N,{className:"p-6",children:e.jsx(R,{columns:m,data:n,mostrarEditar:!1,mostrarEliminar:!1,mostrarAgregarNuevo:!1})})]})}const u={1:{label:"En llenado de información",color:"bg-yellow-100 text-yellow-700"},2:{label:"Tareas generadas",color:"bg-blue-100 text-blue-700"},3:{label:"Solicitud rechazada",color:"bg-red-100 text-red-700"},4:{label:"Oportunidad lograda",color:"bg-green-100 text-green-700"}};function me(){const[o,n]=i.useState(0),{id:s}=w(),[t,c]=i.useState(null),[x,m]=i.useState(!0);i.useEffect(()=>{async function l(){m(!0);try{const r=await J(s);c(r.data?r.data[0]:r)}catch(r){console.error("Error al cargar la solicitud:",r),c(null)}finally{m(!1)}}l()},[s]);const a=(t==null?void 0:t.faseProceso)!==1,d=[{label:"Identificación",icon:P,component:e.jsx(L,{id:s,bloquearEdicion:a})},{label:"Proyección",icon:k,component:e.jsx(I,{id:s,bloquearEdicion:a})},{label:"Datos generales",icon:T,component:e.jsx(F,{id:s,bloquearEdicion:a})},{label:"Actividad económica",icon:E,component:e.jsx(M,{id:s,bloquearEdicion:a})},{label:"Contacto y ubicación",icon:S,component:e.jsx(U,{id:s,bloquearEdicion:a})},{label:"Banco",icon:A,component:e.jsx($,{id:s,bloquearEdicion:a})},{label:"Beneficiarios",icon:z,component:e.jsx(G,{id:s,bloquearEdicion:a})},{label:"Adjuntos",icon:B,component:e.jsx(H,{id:s,bloquearEdicion:a})},{label:"Finalización",icon:p,component:e.jsx(O,{id:s,bloquearEdicion:a})},{label:"Tareas",icon:D,component:e.jsx(K,{idSolicitud:s,bloquearEdicion:a})}],f=()=>n(l=>Math.min(l+1,d.length-1)),g=()=>n(l=>Math.max(l-1,0));return x?e.jsx(b,{visible:!0,message:"Cargando solicitud..."}):t?e.jsxs("div",{className:"flex flex-col min-h-screen antialiased",children:[e.jsx("div",{className:"w-full px-0",children:t.faseProceso&&u[t.faseProceso]&&e.jsxs("div",{className:`flex items-center gap-3 px-6 py-2 border-b rounded-t-xl shadow-sm mb-2
            ${u[t.faseProceso].color} bg-opacity-70`,style:{position:"sticky",top:0,zIndex:30},children:[t.faseProceso===4?e.jsx(C,{className:"w-5 h-5 text-green-700 mr-1"}):e.jsx(p,{className:"w-5 h-5 mr-1"}),e.jsxs("span",{className:"font-semibold text-sm",children:[u[t.faseProceso].label,t.faseProceso===4&&" - No editable"]})]})}),e.jsx("div",{className:"fixed bottom-12 left-0 w-full z-50 px-6 py-3 flex justify-end",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:g,disabled:o===0,className:"w-10 h-10 rounded-full border border-gray-300 text-gray-700 bg-white disabled:opacity-30 hover:bg-gray-100 transition",children:"←"}),e.jsx("button",{onClick:f,disabled:o===d.length-1,className:"w-10 h-10 rounded-full bg-violet-600 text-white disabled:bg-gray-300 hover:bg-violet-700 transition",children:"→"})]})}),e.jsx("div",{className:"px-6 py-6 bg-white",children:e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"grid grid-cols-10 gap-2",children:d.map((l,r)=>{const h=r===o,j=r<o;return e.jsxs("div",{className:"flex flex-col items-center justify-center min-w-[80px] cursor-pointer",onClick:()=>{r<=o&&n(r)},children:[e.jsx("div",{className:`w-10 h-10 flex items-center justify-center rounded-full border-2 
                      ${j?"bg-violet-600 text-white border-violet-600":h?"border-violet-600 text-violet-600":"border-gray-300 text-gray-400"}`,children:e.jsx(l.icon,{className:"w-5 h-5"})}),e.jsx("span",{className:"text-[11px] text-center mt-1 text-gray-600 leading-tight",children:l.label})]},l.label)})}),e.jsx("div",{className:"relative h-2 mt-6 bg-gray-200 rounded-full",children:e.jsx("div",{className:"absolute top-0 left-0 h-2 bg-violet-500 rounded-full transition-all duration-300",style:{width:`${o/(d.length-1)*100}%`}})})]})}),e.jsx("div",{className:"flex-1 p-6",children:d[o].component})]}):e.jsx("div",{className:"p-8 text-center text-red-500",children:"No se pudo cargar la solicitud"})}export{me as default};
