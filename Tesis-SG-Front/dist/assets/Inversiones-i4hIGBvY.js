import{u as y,r as t,j as a,G as h,C as v,c as C,d as N,a as j,t as n}from"./index-CG6H-kfp.js";import{d as i,T as E}from"./TablaCustom2-CwS24NS9.js";import{b as w,c as I}from"./InversionService-CtRFvVDc.js";import"./dialog-2_FlWSQy.js";const A={Administrador:1,"Asesor Comercial":2,"Asesor Legal":3,"Analista de riesgos":4,"Analista de emisión":5,"Analista financiero":6,"Gerencia Comercial":7,Gerencia:8,Externo:9};function F(){const l=y(),[d,c]=t.useState([]),[m,u]=t.useState(!0),x=()=>{var o;const e=JSON.parse(localStorage.getItem("user")),r=(o=e==null?void 0:e.roles)==null?void 0:o[0],s=A[r]||null,f=e==null?void 0:e.id;return{idRol:s,idUsuario:f}},p=async()=>{try{const{idRol:e,idUsuario:r}=x();if(!e){n.error("No se pudo determinar el rol del usuario.");return}let s=[];e===2||e===9?s=await w(r):s=await I(),c(Array.isArray(s)?s:[])}catch(e){n.error("Error al cargar inversiones: "+e.message)}finally{u(!1)}};t.useEffect(()=>{p()},[]);const b=e=>{l(`/inversiones/editar/${e.idInversion}`)},g=[{key:"idInversion",label:"",render:e=>a.jsxs("div",{className:"flex items-center justify-center group relative text-gray-500",children:[a.jsx(i,{className:"w-5 h-5"}),a.jsxs("span",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-1 text-xs text-white bg-zinc-800 px-2 py-0.5 rounded shadow opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-50 whitespace-nowrap",children:["ID: ",e]})]})},{key:"inversionNombre",label:"Nombre"},{key:"nombreCompletoCliente",label:"Cliente"},{key:"capital",label:"Capital",render:e=>e!=null?`$${Number(e).toLocaleString("es-EC",{minimumFractionDigits:2})}`:"-"},{key:"plazo",label:"Plazo (meses)"},{key:"tasa",label:"Tasa",render:e=>e!=null?`${Number(e).toFixed(2)}%`:"-"},{key:"fechaCreacion",label:"Fecha Creación",render:e=>e?new Date(e).toLocaleDateString("es-EC"):""},{key:"terminada",label:"Estado",render:e=>e?a.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-700",children:"Finalizada"}):a.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-700",children:"Vigente"})}];return a.jsxs("div",{className:"p-4 sm:p-6 md:p-8 max-w-full relative",children:[a.jsx(h,{visible:m,message:"Cargando inversiones..."}),a.jsxs(v,{className:"w-full border border-muted rounded-xl shadow-[0_4px_10px_rgba(0,0,0,0.12)]",children:[a.jsx(C,{children:a.jsxs(N,{className:"text-3xl flex items-center gap-3",children:[a.jsx(i,{className:"text-blue-700"})," Lista de Inversiones"]})}),a.jsx(j,{className:"p-6 overflow-x-auto",children:a.jsx(E,{columns:g,data:d,mostrarEditar:!0,mostrarEliminar:!1,mostrarAgregarNuevo:!1,onEditarClick:b})})]})]})}export{F as default};
