import{u as b,r as t,j as a,G as h,C as y,c as j,d as w,a as C,t as i}from"./index-CG6H-kfp.js";import{T as N}from"./TablaCustom2-CwS24NS9.js";import{g as T}from"./TareaService-CZcn_o-m.js";import"./dialog-2_FlWSQy.js";const k={Administrador:1,"Asesor Comercial":2,"Asesor Legal":3,"Analista de riesgos":4,"Analista de emisi贸n":5,"Analista financiero":6,"Gerencia Comercial":7,Gerencia:8,Externo:9};function L(){const l=b(),[d,c]=t.useState([]),[m,u]=t.useState(!0),x=()=>{var r;const e=JSON.parse(localStorage.getItem("user")),s=(r=e==null?void 0:e.roles)==null?void 0:r[0];return k[s]||null},p=async()=>{try{const e=x();if(!e){i.error("No se pudo determinar el rol del usuario.");return}const r=[...await T(e)].sort((o,n)=>o.nombreResultado==="Pendiente"&&n.nombreResultado!=="Pendiente"?-1:o.nombreResultado!=="Pendiente"&&n.nombreResultado==="Pendiente"?1:0);c(r)}catch(e){i.error("Error al cargar tareas: "+e.message)}finally{u(!1)}};t.useEffect(()=>{p()},[]);const g=e=>{l(`/tareas/editar/${e.idTarea}`)},f=[{key:"idTarea",label:"",render:e=>a.jsxs("div",{className:"flex items-center justify-center group relative text-gray-500",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"1.5",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17h6m-6-4h6m2 9a2 2 0 002-2V7a2 2 0 00-2-2h-3.586a1 1 0 01-.707-.293l-1.414-1.414A1 1 0 0011.586 3H9a2 2 0 00-2 2v14a2 2 0 002 2h6z"})}),a.jsxs("span",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-1 text-xs text-white bg-zinc-800 px-2 py-0.5 rounded shadow opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-50 whitespace-nowrap",children:["ID: ",e]})]})},{key:"idTipoTarea",label:"ID Tipo"},{key:"tareaNombre",label:"Nombre"},{key:"nombreResultado",label:"Resultado",render:e=>a.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${e==="Pendiente"?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:e})},{key:"fechaCreacion",label:"Creaci贸n",render:e=>new Date(e).toLocaleDateString()},{key:"fechaModificacion",label:"Modificaci贸n",render:e=>e?new Date(e).toLocaleDateString():a.jsx("span",{className:"text-gray-400 italic",children:"Sin modificaci贸n"})}];return a.jsxs("div",{className:"p-4 sm:p-6 md:p-8 max-w-full relative",children:[a.jsx(h,{visible:m,message:"Cargando tareas..."}),a.jsxs(y,{className:"w-full border border-muted rounded-xl shadow-[0_4px_10px_rgba(0,0,0,0.12)]",children:[a.jsx(j,{children:a.jsx(w,{className:"text-3xl",children:"Lista de Tareas"})}),a.jsx(C,{className:"p-6 overflow-x-auto",children:a.jsx(N,{columns:f,data:d,mostrarEditar:!0,mostrarEliminar:!0,mostrarAgregarNuevo:!1,onEditarClick:g,onEliminarClick:e=>console.log("Eliminar:",e)})})]})]})}export{L as default};
