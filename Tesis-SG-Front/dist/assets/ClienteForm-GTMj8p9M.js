import{f as L,u as $,r as x,t as y,j as e,G as z,B as p,C as m,a as u,I as r,L as M}from"./index-ABbIRX4x.js";import{a as G,b as O,T as E,c as U,d as D}from"./TablaCustom2-DS7_i3Ng.js";import{g as A,a as V,u as _}from"./ClienteService-Crd2CGs_.js";import{g as q}from"./CasosService-C8bij2xq.js";import"./jspdf.plugin.autotable-CZR7NrjE.js";function H(c){var j,g,b,h;if(!c)return"";const d=((g=(j=c.nombres)==null?void 0:j.trim())==null?void 0:g[0])||"",s=((h=(b=c.apellidoPaterno)==null?void 0:b.trim())==null?void 0:h[0])||"";return(d+s).toUpperCase()}function n({label:c,children:d}){return e.jsxs("div",{className:"space-y-1",children:[e.jsx(M,{className:"font-medium text-gray-700 text-sm",children:c}),d]})}function Z(){var P,T;const{id:c}=L(),d=$(),[s,j]=x.useState(null),[g,b]=x.useState([]),[h,I]=x.useState([]),[F,v]=x.useState(!1),[l,f]=x.useState(!1),[i,N]=x.useState({}),S=[{key:"idInversion",label:"",render:(a,o)=>e.jsx("span",{className:"flex justify-center items-center cursor-pointer",title:`Id: ${o.idInversion}`,onClick:()=>d(`/inversiones/editar/${o.idInversion}`),children:e.jsx(D,{className:"text-blue-600 hover:text-blue-800",size:18})})},{key:"nombreCompletoCliente",label:"Cliente"},{key:"inversionNombre",label:"Inversión"},{key:"terminada",label:"Estado",render:a=>a===!1?"Vigente":"Finalizada"}],k=[{key:"idCaso",label:"",render:(a,o)=>e.jsx("span",{className:"flex justify-center items-center cursor-pointer",title:`Id: ${o.idCaso}`,onClick:()=>d(`/casos/editar/${o.idCaso}`),children:e.jsx(D,{className:"text-green-600 hover:text-green-800",size:18})})},{key:"numeroCaso",label:"N° Caso"},{key:"motivoNombre",label:"Motivo"},{key:"estado",label:"Estado"},{key:"fechaCreacion",label:"F. Creación",render:a=>a&&new Date(a).toLocaleDateString("es-EC")}];x.useEffect(()=>{(async()=>{v(!0);try{const a=await A(c);j(a);const o=await V(c);b(Array.isArray(o)?o:[]);const C=await q(c);I(Array.isArray(C)?C:[])}catch(a){y.error("Error al cargar datos del cliente"+(a.message?`: ${a.message}`:""))}v(!1)})()},[c]);const w=()=>{N({...s}),f(!0)},B=()=>{f(!1),N({})},t=(a,o)=>{N(C=>({...C,[a]:o}))},R=async a=>{a.preventDefault(),v(!0);try{await _(i),y.success("Cliente actualizado correctamente"),f(!1);const o=await A(c);j(o)}catch(o){y.error("Error al actualizar cliente"+(o.message?`: ${o.message}`:""))}v(!1)};return F?e.jsx(z,{visible:!0,message:"Cargando cliente..."}):s?e.jsxs("div",{className:"max-w-7xl mx-auto p-4 md:p-6 space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between border-b pb-4 rounded-2xl px-4 mb-2 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"rounded-full w-14 h-14 flex items-center justify-center text-2xl font-bold shadow bg-blue-100 text-blue-700",children:H(s)}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-xl font-bold",children:[s.nombres," ",s.apellidoPaterno," ",s.apellidoMaterno]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Cliente"})]})]}),e.jsxs("div",{className:"flex gap-6 flex-wrap items-center mt-2 md:mt-0",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"font-semibold",children:s.usuarioPropietarioNombreCompleto||"Sin propietario"}),e.jsx("span",{className:"text-xs text-gray-400",children:"Propietario"})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"font-semibold",children:s.tipoCliente||"Natural"}),e.jsx("span",{className:"text-xs text-gray-400",children:"Tipo de cliente"})]}),e.jsxs(p,{variant:"outline",className:"flex items-center gap-2",onClick:()=>d("/clientes/vista"),children:[e.jsx(G,{})," Volver a Clientes"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(m,{children:e.jsxs(u,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Detalle de Cliente"}),!l&&s.actualizacionDatos===!0&&e.jsx(p,{className:"ml-auto",onClick:w,variant:"outline",children:"Editar datos"})]}),e.jsxs("form",{onSubmit:R,className:"space-y-6",children:[e.jsxs("section",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Datos Personales"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:[e.jsx(n,{label:"Nombres",children:e.jsx(r,{disabled:!0,value:l?i.nombres:s.nombres,onChange:a=>t("nombres",a.target.value)})}),e.jsx(n,{label:"Apellido Paterno",children:e.jsx(r,{disabled:!0,value:l?i.apellidoPaterno:s.apellidoPaterno,onChange:a=>t("apellidoPaterno",a.target.value)})}),e.jsx(n,{label:"Apellido Materno",children:e.jsx(r,{disabled:!0,value:l?i.apellidoMaterno:s.apellidoMaterno,onChange:a=>t("apellidoMaterno",a.target.value)})}),e.jsx(n,{label:"Número Documento",children:e.jsx(r,{disabled:!0,value:l?i.numeroDocumento:s.numeroDocumento})}),e.jsx(n,{label:"Fecha Nacimiento",children:e.jsx(r,{type:"date",disabled:!l,value:l?i.fechaNacimiento:(P=s.fechaNacimiento)==null?void 0:P.slice(0,10),onChange:a=>t("fechaNacimiento",a.target.value)})}),e.jsx(n,{label:"Tipo Identificación",children:e.jsx(r,{disabled:!0,value:s.tipoIdentificacion})}),e.jsx(n,{label:"Género",children:e.jsx(r,{disabled:!l,value:l?i.genero:s.genero,onChange:a=>t("genero",a.target.value)})}),e.jsx(n,{label:"Estado Civil",children:e.jsx(r,{disabled:!l,value:l?i.estadoCivil:s.estadoCivil,onChange:a=>t("estadoCivil",a.target.value)})}),e.jsx(n,{label:"Nacionalidad",children:e.jsx(r,{disabled:!l,value:l?i.nacionalidad:s.nacionalidad,onChange:a=>t("nacionalidad",a.target.value)})}),e.jsx(n,{label:"Nivel Académico",children:e.jsx(r,{disabled:!l,value:l?i.nivelAcademico:s.nivelAcademico,onChange:a=>t("nivelAcademico",a.target.value)})})]})]}),l&&e.jsxs("div",{className:"flex gap-4 justify-end pt-4",children:[e.jsx(p,{type:"button",variant:"secondary",onClick:B,children:"Cancelar"}),e.jsx(p,{type:"submit",className:"bg-primary text-white",children:"Guardar cambios"})]})]})]})})}),e.jsxs("div",{className:"lg:col-span-3 flex flex-col gap-6",children:[e.jsx(m,{children:e.jsxs(u,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(O,{className:"text-blue-700"}),e.jsx("h2",{className:"font-semibold text-base",children:"Inversiones del Cliente"})]}),e.jsx(E,{columns:S,data:g||[],mostrarEditar:!1,mostrarEliminar:!1,mostrarAgregarNuevo:!1,itemsPerPageInit:5})]})}),e.jsx(m,{children:e.jsxs(u,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(U,{className:"text-green-700"}),e.jsx("h2",{className:"font-semibold text-base",children:"Casos del Cliente"})]}),e.jsx(E,{columns:k,data:h||[],mostrarEditar:!1,mostrarEliminar:!1,mostrarAgregarNuevo:!1,itemsPerPageInit:3})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(m,{children:e.jsxs(u,{className:"p-6 space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Actividad Económica"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(n,{label:"Actividad Principal",children:e.jsx(r,{disabled:!l,value:l?i.actividadEconomicaPrincipal:s.actividadEconomicaPrincipal,onChange:a=>t("actividadEconomicaPrincipal",a.target.value)})}),e.jsx(n,{label:"Lugar Trabajo",children:e.jsx(r,{disabled:!l,value:l?i.lugarTrabajo:s.lugarTrabajo,onChange:a=>t("lugarTrabajo",a.target.value)})}),e.jsx(n,{label:"Correo Trabajo",children:e.jsx(r,{disabled:!l,value:l?i.correoTrabajo:s.correoTrabajo,onChange:a=>t("correoTrabajo",a.target.value)})}),e.jsx(n,{label:"Otra Actividad",children:e.jsx(r,{disabled:!l,value:l?i.otraActividad:s.otraActividad,onChange:a=>t("otraActividad",a.target.value)})}),e.jsx(n,{label:"Cargo",children:e.jsx(r,{disabled:!l,value:l?i.cargo:s.cargo,onChange:a=>t("cargo",a.target.value)})}),e.jsx(n,{label:"Antigüedad",children:e.jsx(r,{disabled:!l,value:l?i.antiguedad:s.antiguedad,onChange:a=>t("antiguedad",a.target.value)})}),e.jsx(n,{label:"Teléfono Trabajo",children:e.jsx(r,{disabled:!l,value:l?i.telefonoTrabajo:s.telefonoTrabajo,onChange:a=>t("telefonoTrabajo",a.target.value)})}),e.jsx(n,{label:"Fecha Inicio Actividad",children:e.jsx(r,{type:"date",disabled:!l,value:l?i.fechaInicioActividad:(T=s.fechaInicioActividad)==null?void 0:T.slice(0,10),onChange:a=>t("fechaInicioActividad",a.target.value)})}),e.jsx(n,{label:"Dirección Trabajo",children:e.jsx(r,{disabled:!l,value:l?i.direccionTrabajo:s.direccionTrabajo,onChange:a=>t("direccionTrabajo",a.target.value)})}),e.jsx(n,{label:"Referencia Dirección",children:e.jsx(r,{disabled:!l,value:l?i.referenciaDireccionTrabajo:s.referenciaDireccionTrabajo,onChange:a=>t("referenciaDireccionTrabajo",a.target.value)})}),e.jsx(n,{label:"Es PEP",children:e.jsx(r,{disabled:!l,value:l?i.esPEP:s.esPEP,onChange:a=>t("esPEP",a.target.value)})})]})]})}),e.jsx(m,{children:e.jsxs(u,{className:"p-6 space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Contacto & Ubicación"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(n,{label:"Correo Electrónico",children:e.jsx(r,{disabled:!l,value:l?i.correoElectronico:s.correoElectronico,onChange:a=>t("correoElectronico",a.target.value)})}),e.jsx(n,{label:"Teléfono Celular",children:e.jsx(r,{disabled:!l,value:l?i.telefonoCelular:s.telefonoCelular,onChange:a=>t("telefonoCelular",a.target.value)})}),e.jsx(n,{label:"Otro Teléfono",children:e.jsx(r,{disabled:!l,value:l?i.otroTelefono:s.otroTelefono,onChange:a=>t("otroTelefono",a.target.value)})}),e.jsx(n,{label:"Teléfono Fijo",children:e.jsx(r,{disabled:!l,value:l?i.telefonoFijo:s.telefonoFijo,onChange:a=>t("telefonoFijo",a.target.value)})}),e.jsx(n,{label:"Calle Principal",children:e.jsx(r,{disabled:!l,value:l?i.callePrincipal:s.callePrincipal,onChange:a=>t("callePrincipal",a.target.value)})}),e.jsx(n,{label:"Número Domicilio",children:e.jsx(r,{disabled:!l,value:l?i.numeroDomicilio:s.numeroDomicilio,onChange:a=>t("numeroDomicilio",a.target.value)})}),e.jsx(n,{label:"Calle Secundaria",children:e.jsx(r,{disabled:!l,value:l?i.calleSecundaria:s.calleSecundaria,onChange:a=>t("calleSecundaria",a.target.value)})}),e.jsx(n,{label:"Referencia Domicilio",children:e.jsx(r,{disabled:!l,value:l?i.referenciaDomicilio:s.referenciaDomicilio,onChange:a=>t("referenciaDomicilio",a.target.value)})}),e.jsx(n,{label:"Sector/Barrio",children:e.jsx(r,{disabled:!l,value:l?i.sectorBarrio:s.sectorBarrio,onChange:a=>t("sectorBarrio",a.target.value)})}),e.jsx(n,{label:"Tiempo Residencia",children:e.jsx(r,{disabled:!l,value:l?i.tiempoResidencia:s.tiempoResidencia,onChange:a=>t("tiempoResidencia",a.target.value)})}),e.jsx(n,{label:"País",children:e.jsx(r,{disabled:!l,value:l?i.pais:s.pais,onChange:a=>t("pais",a.target.value)})}),e.jsx(n,{label:"Provincia",children:e.jsx(r,{disabled:!l,value:l?i.provincia:s.provincia,onChange:a=>t("provincia",a.target.value)})}),e.jsx(n,{label:"Ciudad",children:e.jsx(r,{disabled:!l,value:l?i.ciudad:s.ciudad,onChange:a=>t("ciudad",a.target.value)})})]})]})}),e.jsx(m,{children:e.jsxs(u,{className:"p-6 space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Cuenta Bancaria"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(n,{label:"Banco",children:e.jsx(r,{disabled:!l,value:l?i.bancoNombre:s.bancoNombre,onChange:a=>t("bancoNombre",a.target.value)})}),e.jsx(n,{label:"Tipo de Cuenta",children:e.jsx(r,{disabled:!l,value:l?i.tipoCuenta:s.tipoCuenta,onChange:a=>t("tipoCuenta",a.target.value)})}),e.jsx(n,{label:"Número de Cuenta",children:e.jsx(r,{disabled:!l,value:l?i.numeroCuenta:s.numeroCuenta,onChange:a=>t("numeroCuenta",a.target.value)})})]})]})})]})]}):e.jsx("div",{className:"text-center text-gray-600",children:"Cargando datos..."})}export{Z as default};
