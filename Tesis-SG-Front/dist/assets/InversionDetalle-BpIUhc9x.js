import{e as E,u as P,r as c,j as e,G as R,B as S,C as x,a as u}from"./index-CG6H-kfp.js";import{F as w,a as g,b as T,T as b,c as v}from"./TablaCustom2-CwS24NS9.js";import{g as z,a as L}from"./InversionService-CtRFvVDc.js";import{g as M}from"./SolicitudService-CKfwnCvg.js";import"./dialog-2_FlWSQy.js";function r(i){return i==null?"-":`$${Number(i).toLocaleString("es-EC",{minimumFractionDigits:2})}`}function t(i){return i?new Date(i).toLocaleDateString("es-EC",{day:"2-digit",month:"2-digit",year:"numeric"}):""}function O(i){if(!i)return"";const o=/- ([^-]+) -/,d=i.match(o);return d&&d[1]?d[1].trim():""}function U(){const{id:i}=E(),o=P(),[d,f]=c.useState(!0),[a,p]=c.useState(null),[h,N]=c.useState([]),[y,j]=c.useState([]),[C,A]=c.useState([]);c.useEffect(()=>{(async()=>{f(!0);try{const s=await z(i);p(s);let m=[];if(s!=null&&s.periodosJson)try{m=JSON.parse(s.periodosJson)}catch(n){console.error("Error al parsear periodosJson:",n),m=[]}if(A(Array.isArray(m)?m:[]),s!=null&&s.idCliente){const n=await M(s.idCliente);N(Array.isArray(n)?n:[])}if(s!=null&&s.idInversion)try{const n=await L(s.idInversion);j(Array.isArray(n)?n:[])}catch{j([])}}catch(s){console.error("Error al cargar la inversión:",s),p(null)}f(!1)})()},[i]);const k=[{key:"nombreTipoSolicitud",label:"Tipo"},{key:"numeroContrato",label:"Contrato"},{key:"fechaCreacion",label:"F. Creación",render:s=>t(s)},{key:"faseProceso",label:"Fase"}],F=[{key:"nombreDocumento",label:"Nombre"},{key:"fechaCreacion",label:"F. Creación",render:s=>t(s)},{key:"estado",label:"Estado"},{key:"usuarioCreacionNombreCompleto",label:"Creado por"}],I=[{key:"Periodo",label:"Período"},{key:"FechaInicial",label:"Inicio",render:s=>t(s)},{key:"FechaVencimiento",label:"Vencimiento",render:s=>t(s)},{key:"Tasa",label:"Tasa",render:s=>s?`${Number(s).toFixed(2)}%`:"-"},{key:"AporteAdicional",label:"Aporte Adic.",render:r},{key:"CapitalOperacion",label:"Capital",render:r},{key:"Rentabilidad",label:"Rentabilidad",render:r},{key:"CapitalRenta",label:"Capital+Renta",render:r},{key:"CostoOperativo",label:"Coste Op.",render:r},{key:"RentaAcumulada",label:"Renta Acum.",render:r},{key:"CapitalFinal",label:"Capital Final",render:r},{key:"MontoPagar",label:"Monto Pagar",render:r}];return d?e.jsx(R,{visible:!0,message:"Cargando inversión..."}):a?e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-6 mb-4 bg-white border-b pb-4 rounded-2xl px-4",children:[e.jsx(S,{variant:"outline",className:"flex items-center gap-2 mb-2 md:mb-0",onClick:()=>o("/inversiones/vista"),children:e.jsx(w,{})}),e.jsxs("div",{className:"flex-1 flex flex-col md:flex-row md:justify-between md:items-end gap-6",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-full w-12 h-12 bg-blue-100 flex items-center justify-center text-blue-600 text-2xl font-bold",children:e.jsx(g,{})}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-md font-bold text-gray-800",children:[a.inversionNombre," ",e.jsx("span",{className:"font-normal text-gray-500",children:a.plazo?`(${a.plazo} meses)`:""})]}),e.jsx("div",{className:"text-lg text-blue-800 font-semibold",children:r(a.capital)})]})]})}),e.jsxs("div",{className:"flex flex-row gap-8",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("div",{className:"text-base text-gray-800 font-semibold flex items-center gap-2",children:[e.jsx(T,{className:"text-indigo-700"}),e.jsx("span",{children:a.usuarioPropietarioNombreCompleto||"Sin asignar"})]}),e.jsx("div",{className:"text-xs text-gray-400",children:"Propietario"})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"text-base text-blue-900 font-semibold",children:a.nombreCompletoCliente}),e.jsx("div",{className:"text-xs text-gray-400",children:"Cliente"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-8",children:[e.jsx("div",{className:"md:col-span-5 space-y-8",children:e.jsx(x,{children:e.jsxs(u,{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Información del producto"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(l,{label:"Producto",value:O(a.inversionNombre)}),e.jsx(l,{label:"Plazo",value:a.plazo?`${a.plazo} meses`:"-"}),e.jsx(l,{label:"Tasa",value:a.tasa?`${Number(a.tasa).toFixed(2)}%`:"-"}),e.jsx(l,{label:"Estado",value:a.terminada?"Finalizada":"Vigente"}),e.jsx(l,{label:"Capital",value:r(a.capital)}),e.jsx(l,{label:"Aporte Adicional",value:r(a.aporteAdicional)}),e.jsx(l,{label:"Coste Operativo",value:r(a.costeOperativo)}),e.jsx(l,{label:"Coste Notarización",value:r(a.costeNotarizacion)}),e.jsx(l,{label:"Fecha Inicial",value:t(a.fechaInicial)}),e.jsx(l,{label:"Fecha Vencimiento",value:t(a.fechaVencimiento)}),e.jsx(l,{label:"Rentabilidad Total",value:r(a.totalRentabilidad)}),e.jsx(l,{label:"Renta Total",value:r(a.totalRentaPeriodo)}),e.jsx(l,{label:"Valor a Liquidar",value:r(a.valorProyectadoLiquidar)}),e.jsx(l,{label:"Capital + Rendimiento",value:r(a.rendimientosMasCapital)}),e.jsx(l,{label:"Usuario Creación",value:a.usuarioCreacionNombreCompleto}),e.jsx(l,{label:"Fecha Creación",value:t(a.fechaCreacion)}),e.jsx(l,{label:"Usuario Modificación",value:a.usuarioModificacionNombreCompleto??"-"}),e.jsx(l,{label:"Fecha Modificación",value:t(a.fechaModificacion)})]})]})})}),e.jsxs("div",{className:"md:col-span-7 flex flex-col gap-6",children:[e.jsx(x,{children:e.jsxs(u,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(g,{className:"text-blue-700"}),e.jsx("h2",{className:"font-semibold text-base",children:"Solicitudes de Inversión"})]}),e.jsx(b,{columns:k,data:h,mostrarEditar:!1,mostrarEliminar:!1,mostrarAgregarNuevo:!0,onAgregarNuevoClick:()=>o("/solicitudes/nuevo")})]})}),e.jsx(x,{children:e.jsxs(u,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(v,{className:"text-green-700"}),e.jsx("h2",{className:"font-semibold text-base",children:"Adendums"})]}),e.jsx(b,{columns:F,data:y,mostrarEditar:!1,mostrarEliminar:!1,mostrarAgregarNuevo:!1})]})})]})]}),e.jsx(x,{children:e.jsxs(u,{className:"p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-700 mb-4 flex items-center gap-2",children:[e.jsx(v,{})," Cronograma de la Inversión"]}),e.jsx(b,{columns:I,data:C,mostrarEditar:!1,mostrarEliminar:!1,mostrarAgregarNuevo:!1})]})})]}):e.jsx("div",{className:"text-center text-gray-600",children:"No se encontró la inversión."})}function l({label:i,value:o}){return e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:i}),e.jsx("p",{className:"text-base font-medium text-gray-900",children:o??"-"})]})}export{U as default};
