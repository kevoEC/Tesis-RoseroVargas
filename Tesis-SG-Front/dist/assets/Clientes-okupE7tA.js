import{u as b,r as s,j as a,G as h,C as y,c as j,d as N,U as l,a as w,t as i}from"./index-CG6H-kfp.js";import{T as E}from"./TablaCustom2-CwS24NS9.js";import{g as A,a as k}from"./ClienteService-Ht_XEjiQ.js";import"./dialog-2_FlWSQy.js";const v={Administrador:1,"Asesor Comercial":2,"Asesor Legal":3,"Analista de riesgos":4,"Analista de emisión":5,"Analista financiero":6,"Gerencia Comercial":7,Gerencia:8,Externo:9};function R(){const n=b(),[c,d]=s.useState([]),[m,u]=s.useState(!0),x=()=>{var o;const e=JSON.parse(localStorage.getItem("user")),t=(o=e==null?void 0:e.roles)==null?void 0:o[0],r=v[t]||null,C=e==null?void 0:e.id;return{idRol:r,idUsuario:C}},p=async()=>{try{const{idRol:e,idUsuario:t}=x();if(!e){i.error("No se pudo determinar el rol del usuario.");return}let r=[];e===2||e===9?r=await A(t):r=await k(),d(r)}catch(e){i.error("Error al cargar clientes: "+e.message)}finally{u(!1)}};s.useEffect(()=>{p()},[]);const f=e=>{n(`/clientes/editar/${e.idCliente}`)},g=[{key:"idCliente",label:"",render:e=>a.jsxs("div",{className:"flex items-center justify-center group relative text-gray-500",children:[a.jsx(l,{className:"w-5 h-5"}),a.jsxs("span",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-1 text-xs text-white bg-zinc-800 px-2 py-0.5 rounded shadow opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-50 whitespace-nowrap",children:["ID: ",e]})]})},{key:"numeroDocumento",label:"Documento"},{key:"nombres",label:"Nombres"},{key:"apellidoPaterno",label:"Apellido Paterno"},{key:"apellidoMaterno",label:"Apellido Materno"},{key:"correoElectronico",label:"Correo"},{key:"telefonoCelular",label:"Celular"},{key:"fechaCreacion",label:"Fecha Creación",render:e=>e?new Date(e).toLocaleDateString():""}];return a.jsxs("div",{className:"p-4 sm:p-6 md:p-8 max-w-full relative",children:[a.jsx(h,{visible:m,message:"Cargando clientes..."}),a.jsxs(y,{className:"w-full border border-muted rounded-xl shadow-[0_4px_10px_rgba(0,0,0,0.12)]",children:[a.jsx(j,{children:a.jsxs(N,{className:"text-3xl flex items-center gap-3",children:[a.jsx(l,{className:"text-blue-700"})," Lista de Clientes"]})}),a.jsx(w,{className:"p-6 overflow-x-auto",children:a.jsx(E,{columns:g,data:c,mostrarEditar:!0,mostrarEliminar:!1,mostrarAgregarNuevo:!1,onEditarClick:f})})]})]})}export{R as default};
