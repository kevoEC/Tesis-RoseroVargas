import{e as B,u as R,r as x,t as y,j as e,G as $,B as m,C as u,a as b,I as n,L as V}from"./index-CG6H-kfp.js";import{F as z,a as G,T as D,c as M}from"./TablaCustom2-CwS24NS9.js";import{b as P,u as O}from"./ClienteService-Ht_XEjiQ.js";import{d as U}from"./InversionService-CtRFvVDc.js";import"./dialog-2_FlWSQy.js";async function _(c){}function K(c){var j,g,h,v;if(!c)return"";const d=((g=(j=c.nombres)==null?void 0:j.trim())==null?void 0:g[0])||"",s=((v=(h=c.apellidoPaterno)==null?void 0:h.trim())==null?void 0:v[0])||"";return(d+s).toUpperCase()}function r({label:c,children:d}){return e.jsxs("div",{className:"space-y-1",children:[e.jsx(V,{className:"font-medium text-gray-700 text-sm",children:c}),d]})}function Y(){var T,E;const{id:c}=B(),d=R(),[s,j]=x.useState(null),[g,h]=x.useState([]),[v,A]=x.useState([]),[I,C]=x.useState(!1),[l,f]=x.useState(!1),[i,N]=x.useState({}),F=[{key:"numeroContrato",label:"Contrato"},{key:"capital",label:"Capital",render:a=>`$${Number(a).toLocaleString("es-EC")}`},{key:"fechaInicial",label:"Inicio",render:a=>a&&new Date(a).toLocaleDateString("es-EC")},{key:"fechaVencimiento",label:"Vencimiento",render:a=>a&&new Date(a).toLocaleDateString("es-EC")},{key:"tasa",label:"Tasa",render:a=>a?`${Number(a).toFixed(2)}%`:"-"},{key:"estado",label:"Estado",render:a=>a?"Vigente":"Finalizada"},{key:"acciones",label:"Acciones",render:(a,o)=>e.jsx(m,{size:"sm",variant:"outline",onClick:()=>d(`/inversiones/editar/${o.idInversion}`),children:"Ver Detalle"})}],k=[{key:"titulo",label:"Título"},{key:"estado",label:"Estado"},{key:"fechaCreacion",label:"F. Creación",render:a=>a&&new Date(a).toLocaleDateString("es-EC")},{key:"responsableNombre",label:"Responsable"},{key:"acciones",label:"Acciones",render:(a,o)=>e.jsx(m,{size:"sm",variant:"outline",onClick:()=>d(`/casos/editar/${o.idCaso}`),children:"Ver Detalle"})}];x.useEffect(()=>{(async()=>{C(!0);try{const a=await P(c);j(a);const o=await U(c);h(Array.isArray(o)?o:[]);const p=await _(c);A(Array.isArray(p)?p:[])}catch(a){y.error("Error al cargar datos del cliente"+(a.message?`: ${a.message}`:""))}C(!1)})()},[c]);const S=()=>{N({...s}),f(!0)},w=()=>{f(!1),N({})},t=(a,o)=>{N(p=>({...p,[a]:o}))},L=async a=>{a.preventDefault(),C(!0);try{await O(i),y.success("Cliente actualizado correctamente"),f(!1);const o=await P(c);j(o)}catch(o){y.error("Error al actualizar cliente"+(o.message?`: ${o.message}`:""))}C(!1)};return I?e.jsx($,{visible:!0,message:"Cargando cliente..."}):s?e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between border-b pb-4 rounded-2xl px-4 mb-2 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"rounded-full w-14 h-14 flex items-center justify-center text-2xl font-bold shadow bg-blue-100 text-blue-700",children:K(s)}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-xl font-bold",children:[s.nombres," ",s.apellidoPaterno," ",s.apellidoMaterno]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Cliente"})]})]}),e.jsxs("div",{className:"flex gap-8 items-center mt-2 md:mt-0",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"font-semibold",children:s.propietarioNombreCompleto||"Kevin Rosero"}),e.jsx("span",{className:"text-xs text-gray-400",children:"Propietario"})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"font-semibold",children:s.tipoCliente||"Natural"}),e.jsx("span",{className:"text-xs text-gray-400",children:"Tipo de cliente"})]}),e.jsxs(m,{variant:"outline",className:"flex items-center gap-2",onClick:()=>d("/clientes/vista"),children:[e.jsx(z,{})," Volver a Clientes"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(u,{children:e.jsxs(b,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-14",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Detalle de Cliente"}),!l&&e.jsx(m,{className:"ml-auto",onClick:S,variant:"outline",children:"Editar datos"})]}),e.jsxs("form",{onSubmit:L,className:"space-y-6",children:[e.jsxs("section",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Datos Personales"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-14",children:[e.jsx(r,{label:"Nombres",children:e.jsx(n,{disabled:!0,value:l?i.nombres:s.nombres,onChange:a=>t("nombres",a.target.value)})}),e.jsx(r,{label:"Apellido Paterno",children:e.jsx(n,{disabled:!0,value:l?i.apellidoPaterno:s.apellidoPaterno,onChange:a=>t("apellidoPaterno",a.target.value)})}),e.jsx(r,{label:"Apellido Materno",children:e.jsx(n,{disabled:!0,value:l?i.apellidoMaterno:s.apellidoMaterno,onChange:a=>t("apellidoMaterno",a.target.value)})}),e.jsx(r,{label:"Número Documento",children:e.jsx(n,{disabled:!0,value:l?i.numeroDocumento:s.numeroDocumento})}),e.jsx(r,{label:"Fecha Nacimiento",children:e.jsx(n,{type:"date",disabled:!l,value:l?i.fechaNacimiento:(T=s.fechaNacimiento)==null?void 0:T.slice(0,10),onChange:a=>t("fechaNacimiento",a.target.value)})}),e.jsx(r,{label:"Tipo Identificación",children:e.jsx(n,{disabled:!0,value:s.tipoIdentificacion})}),e.jsx(r,{label:"Género",children:e.jsx(n,{disabled:!l,value:l?i.genero:s.genero,onChange:a=>t("genero",a.target.value)})}),e.jsx(r,{label:"Estado Civil",children:e.jsx(n,{disabled:!l,value:l?i.estadoCivil:s.estadoCivil,onChange:a=>t("estadoCivil",a.target.value)})}),e.jsx(r,{label:"Nacionalidad",children:e.jsx(n,{disabled:!l,value:l?i.nacionalidad:s.nacionalidad,onChange:a=>t("nacionalidad",a.target.value)})}),e.jsx(r,{label:"Nivel Académico",children:e.jsx(n,{disabled:!l,value:l?i.nivelAcademico:s.nivelAcademico,onChange:a=>t("nivelAcademico",a.target.value)})})]})]}),l&&e.jsxs("div",{className:"flex gap-4 justify-end pt-4",children:[e.jsx(m,{type:"button",variant:"secondary",onClick:w,children:"Cancelar"}),e.jsx(m,{type:"submit",className:"bg-primary text-white",children:"Guardar cambios"})]})]})]})})}),e.jsxs("div",{className:"lg:col-span-3 flex flex-col gap-6",children:[e.jsx(u,{children:e.jsxs(b,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(G,{className:"text-blue-700"}),e.jsx("h2",{className:"font-semibold text-base",children:"Inversiones del Cliente"})]}),e.jsx(D,{columns:F,data:g||[],mostrarEditar:!1,mostrarEliminar:!1,mostrarAgregarNuevo:!1})]})}),e.jsx(u,{children:e.jsxs(b,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(M,{className:"text-green-700"}),e.jsx("h2",{className:"font-semibold text-base",children:"Casos del Cliente"})]}),e.jsx(D,{columns:k,data:v||[],mostrarEditar:!1,mostrarEliminar:!1,mostrarAgregarNuevo:!1})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(u,{children:e.jsxs(b,{className:"p-6 space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Actividad Económica"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(r,{label:"Actividad Principal",children:e.jsx(n,{disabled:!l,value:l?i.actividadEconomicaPrincipal:s.actividadEconomicaPrincipal,onChange:a=>t("actividadEconomicaPrincipal",a.target.value)})}),e.jsx(r,{label:"Lugar Trabajo",children:e.jsx(n,{disabled:!l,value:l?i.lugarTrabajo:s.lugarTrabajo,onChange:a=>t("lugarTrabajo",a.target.value)})}),e.jsx(r,{label:"Correo Trabajo",children:e.jsx(n,{disabled:!l,value:l?i.correoTrabajo:s.correoTrabajo,onChange:a=>t("correoTrabajo",a.target.value)})}),e.jsx(r,{label:"Otra Actividad",children:e.jsx(n,{disabled:!l,value:l?i.otraActividad:s.otraActividad,onChange:a=>t("otraActividad",a.target.value)})}),e.jsx(r,{label:"Cargo",children:e.jsx(n,{disabled:!l,value:l?i.cargo:s.cargo,onChange:a=>t("cargo",a.target.value)})}),e.jsx(r,{label:"Antigüedad",children:e.jsx(n,{disabled:!l,value:l?i.antiguedad:s.antiguedad,onChange:a=>t("antiguedad",a.target.value)})}),e.jsx(r,{label:"Teléfono Trabajo",children:e.jsx(n,{disabled:!l,value:l?i.telefonoTrabajo:s.telefonoTrabajo,onChange:a=>t("telefonoTrabajo",a.target.value)})}),e.jsx(r,{label:"Fecha Inicio Actividad",children:e.jsx(n,{type:"date",disabled:!l,value:l?i.fechaInicioActividad:(E=s.fechaInicioActividad)==null?void 0:E.slice(0,10),onChange:a=>t("fechaInicioActividad",a.target.value)})}),e.jsx(r,{label:"Dirección Trabajo",children:e.jsx(n,{disabled:!l,value:l?i.direccionTrabajo:s.direccionTrabajo,onChange:a=>t("direccionTrabajo",a.target.value)})}),e.jsx(r,{label:"Referencia Dirección",children:e.jsx(n,{disabled:!l,value:l?i.referenciaDireccionTrabajo:s.referenciaDireccionTrabajo,onChange:a=>t("referenciaDireccionTrabajo",a.target.value)})}),e.jsx(r,{label:"Es PEP",children:e.jsx(n,{disabled:!l,value:l?i.esPEP:s.esPEP,onChange:a=>t("esPEP",a.target.value)})})]})]})}),e.jsx(u,{children:e.jsxs(b,{className:"p-6 space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Contacto & Ubicación"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(r,{label:"Correo Electrónico",children:e.jsx(n,{disabled:!l,value:l?i.correoElectronico:s.correoElectronico,onChange:a=>t("correoElectronico",a.target.value)})}),e.jsx(r,{label:"Teléfono Celular",children:e.jsx(n,{disabled:!l,value:l?i.telefonoCelular:s.telefonoCelular,onChange:a=>t("telefonoCelular",a.target.value)})}),e.jsx(r,{label:"Otro Teléfono",children:e.jsx(n,{disabled:!l,value:l?i.otroTelefono:s.otroTelefono,onChange:a=>t("otroTelefono",a.target.value)})}),e.jsx(r,{label:"Teléfono Fijo",children:e.jsx(n,{disabled:!l,value:l?i.telefonoFijo:s.telefonoFijo,onChange:a=>t("telefonoFijo",a.target.value)})}),e.jsx(r,{label:"Calle Principal",children:e.jsx(n,{disabled:!l,value:l?i.callePrincipal:s.callePrincipal,onChange:a=>t("callePrincipal",a.target.value)})}),e.jsx(r,{label:"Número Domicilio",children:e.jsx(n,{disabled:!l,value:l?i.numeroDomicilio:s.numeroDomicilio,onChange:a=>t("numeroDomicilio",a.target.value)})}),e.jsx(r,{label:"Calle Secundaria",children:e.jsx(n,{disabled:!l,value:l?i.calleSecundaria:s.calleSecundaria,onChange:a=>t("calleSecundaria",a.target.value)})}),e.jsx(r,{label:"Referencia Domicilio",children:e.jsx(n,{disabled:!l,value:l?i.referenciaDomicilio:s.referenciaDomicilio,onChange:a=>t("referenciaDomicilio",a.target.value)})}),e.jsx(r,{label:"Sector/Barrio",children:e.jsx(n,{disabled:!l,value:l?i.sectorBarrio:s.sectorBarrio,onChange:a=>t("sectorBarrio",a.target.value)})}),e.jsx(r,{label:"Tiempo Residencia",children:e.jsx(n,{disabled:!l,value:l?i.tiempoResidencia:s.tiempoResidencia,onChange:a=>t("tiempoResidencia",a.target.value)})}),e.jsx(r,{label:"País",children:e.jsx(n,{disabled:!l,value:l?i.pais:s.pais,onChange:a=>t("pais",a.target.value)})}),e.jsx(r,{label:"Provincia",children:e.jsx(n,{disabled:!l,value:l?i.provincia:s.provincia,onChange:a=>t("provincia",a.target.value)})}),e.jsx(r,{label:"Ciudad",children:e.jsx(n,{disabled:!l,value:l?i.ciudad:s.ciudad,onChange:a=>t("ciudad",a.target.value)})})]})]})}),e.jsx(u,{children:e.jsxs(b,{className:"p-6 space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Cuenta Bancaria"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(r,{label:"Banco",children:e.jsx(n,{disabled:!l,value:l?i.bancoNombre:s.bancoNombre,onChange:a=>t("bancoNombre",a.target.value)})}),e.jsx(r,{label:"Tipo de Cuenta",children:e.jsx(n,{disabled:!l,value:l?i.tipoCuenta:s.tipoCuenta,onChange:a=>t("tipoCuenta",a.target.value)})}),e.jsx(r,{label:"Número de Cuenta",children:e.jsx(n,{disabled:!l,value:l?i.numeroCuenta:s.numeroCuenta,onChange:a=>t("numeroCuenta",a.target.value)})})]})]})})]})]}):e.jsx("div",{className:"text-center text-gray-600",children:"Cargando datos..."})}export{Y as default};
